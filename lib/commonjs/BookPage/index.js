var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.BookPage=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _reactNativeGestureHandler=require("react-native-gesture-handler");var _reactNativeReanimated=_interopRequireWildcard(require("react-native-reanimated"));var _BackShadow=_interopRequireDefault(require("./BackShadow"));var _FrontShadow=_interopRequireDefault(require("./FrontShadow"));var _PageShadow=_interopRequireDefault(require("./PageShadow"));var _BookSpine=require("./BookSpine");var _BookSpine2=require("./BookSpine2");var _utils=require("../utils/utils");var _jsxRuntime=require("react/jsx-runtime");var _this=this,_jsxFileName="/Users/mohamedashraf/Documents/Projects/MyHaydApp/packages/react-native-page-flipper/src/BookPage/index.tsx";function _interopRequireWildcard(e,t){if("function"==typeof WeakMap)var r=new WeakMap(),n=new WeakMap();return(_interopRequireWildcard=function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;var o,i,f={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return f;if(o=t?n:r){if(o.has(e))return o.get(e);o.set(e,f);}for(var _t in e)"default"!==_t&&{}.hasOwnProperty.call(e,_t)&&((i=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,_t))&&(i.get||i.set)?o(f,_t,i):f[_t]=e[_t]);return f;})(e,t);}var timingConfig={duration:800,easing:_reactNativeReanimated.Easing.inOut(_reactNativeReanimated.Easing.cubic)};var _worklet_16660376299940_init_data={code:"function indexTsx1(){const{runOnJS,onPageFlip,id}=this.__closure;runOnJS(onPageFlip)(id,false);}",location:"/Users/mohamedashraf/Documents/Projects/MyHaydApp/packages/react-native-page-flipper/src/BookPage/index.tsx",sourceMap:"{\"version\":3,\"names\":[\"indexTsx1\",\"runOnJS\",\"onPageFlip\",\"id\",\"__closure\"],\"sources\":[\"/Users/mohamedashraf/Documents/Projects/MyHaydApp/packages/react-native-page-flipper/src/BookPage/index.tsx\"],\"mappings\":\"AAkHgB,SAAAA,SAAMA,CAAA,QAAAC,OAAA,CAAAC,UAAA,CAAAC,EAAA,OAAAC,SAAA,CACFH,OAAO,CAACC,UAAU,CAAC,CAACC,EAAE,CAAE,KAAK,CAAC,CAClC\",\"ignoreList\":[]}",version:"3.16.7"};var _worklet_3840731005230_init_data={code:"function indexTsx2(){const{rotateYAsDeg,right,interpolate,containerWidth}=this.__closure;const degrees=rotateYAsDeg.value;const x=right?interpolate(degrees,[0,180],[containerWidth/2,-containerWidth/2]):interpolate(degrees,[-180,0],[containerWidth/2,0]);const w=right?interpolate(degrees,[0,180],[0,containerWidth/2]):interpolate(degrees,[-180,0],[containerWidth/2,0]);return{width:Math.ceil(w),zIndex:2,transform:[{translateX:x}]};}",location:"/Users/mohamedashraf/Documents/Projects/MyHaydApp/packages/react-native-page-flipper/src/BookPage/index.tsx",sourceMap:"{\"version\":3,\"names\":[\"indexTsx2\",\"rotateYAsDeg\",\"right\",\"interpolate\",\"containerWidth\",\"__closure\",\"degrees\",\"value\",\"x\",\"w\",\"width\",\"Math\",\"ceil\",\"zIndex\",\"transform\",\"translateX\"],\"sources\":[\"/Users/mohamedashraf/Documents/Projects/MyHaydApp/packages/react-native-page-flipper/src/BookPage/index.tsx\"],\"mappings\":\"AAqJ2C,SAAAA,SAAMA,CAAA,QAAAC,YAAA,CAAAC,KAAA,CAAAC,WAAA,CAAAC,cAAA,OAAAC,SAAA,CACrC,KAAM,CAAAC,OAAO,CAAGL,YAAY,CAACM,KAAK,CAClC,KAAM,CAAAC,CAAC,CAAGN,KAAK,CACTC,WAAW,CACPG,OAAO,CACP,CAAC,CAAC,CAAE,GAAG,CAAC,CACR,CAACF,cAAc,CAAG,CAAC,CAAE,CAACA,cAAc,CAAG,CAAC,CAC5C,CAAC,CACDD,WAAW,CAACG,OAAO,CAAE,CAAC,CAAC,GAAG,CAAE,CAAC,CAAC,CAAE,CAACF,cAAc,CAAG,CAAC,CAAE,CAAC,CAAC,CAAC,CAE9D,KAAM,CAAAK,CAAC,CAAGP,KAAK,CACTC,WAAW,CAACG,OAAO,CAAE,CAAC,CAAC,CAAE,GAAG,CAAC,CAAE,CAAC,CAAC,CAAEF,cAAc,CAAG,CAAC,CAAC,CAAC,CACvDD,WAAW,CAACG,OAAO,CAAE,CAAC,CAAC,GAAG,CAAE,CAAC,CAAC,CAAE,CAACF,cAAc,CAAG,CAAC,CAAE,CAAC,CAAC,CAAC,CAC9D,MAAO,CACHM,KAAK,CAAEC,IAAI,CAACC,IAAI,CAACH,CAAC,CAAC,CACnBI,MAAM,CAAE,CAAC,CACTC,SAAS,CAAE,CAAC,CAAEC,UAAU,CAAEP,CAAE,CAAC,CACjC,CAAC,CACL\",\"ignoreList\":[]}",version:"3.16.7"};var _worklet_7272129541727_init_data={code:"function indexTsx3(){const{rotateYAsDeg,right,interpolate,containerWidth,Extrapolate}=this.__closure;const degrees=rotateYAsDeg.value;const w=right?interpolate(degrees,[0,90],[containerWidth/2,0],Extrapolate.CLAMP):interpolate(degrees,[-90,0],[0,containerWidth/2],Extrapolate.CLAMP);const style={zIndex:1,width:Math.floor(w)};if(right){style['left']=0;}else{style['right']=0;}return style;}",location:"/Users/mohamedashraf/Documents/Projects/MyHaydApp/packages/react-native-page-flipper/src/BookPage/index.tsx",sourceMap:"{\"version\":3,\"names\":[\"indexTsx3\",\"rotateYAsDeg\",\"right\",\"interpolate\",\"containerWidth\",\"Extrapolate\",\"__closure\",\"degrees\",\"value\",\"w\",\"CLAMP\",\"style\",\"zIndex\",\"width\",\"Math\",\"floor\"],\"sources\":[\"/Users/mohamedashraf/Documents/Projects/MyHaydApp/packages/react-native-page-flipper/src/BookPage/index.tsx\"],\"mappings\":\"AAyK4C,SAAAA,SAAMA,CAAA,QAAAC,YAAA,CAAAC,KAAA,CAAAC,WAAA,CAAAC,cAAA,CAAAC,WAAA,OAAAC,SAAA,CACtC,KAAM,CAAAC,OAAO,CAAGN,YAAY,CAACO,KAAK,CAElC,KAAM,CAAAC,CAAC,CAAGP,KAAK,CACTC,WAAW,CACPI,OAAO,CACP,CAAC,CAAC,CAAE,EAAE,CAAC,CACP,CAACH,cAAc,CAAG,CAAC,CAAE,CAAC,CAAC,CACvBC,WAAW,CAACK,KAChB,CAAC,CACDP,WAAW,CACPI,OAAO,CACP,CAAC,CAAC,EAAE,CAAE,CAAC,CAAC,CACR,CAAC,CAAC,CAAEH,cAAc,CAAG,CAAC,CAAC,CACvBC,WAAW,CAACK,KAChB,CAAC,CAEP,KAAM,CAAAC,KAAgB,CAAG,CACrBC,MAAM,CAAE,CAAC,CACTC,KAAK,CAAEC,IAAI,CAACC,KAAK,CAACN,CAAC,CACvB,CAAC,CAED,GAAIP,KAAK,CAAE,CACPS,KAAK,CAAC,MAAM,CAAC,CAAG,CAAC,CACrB,CAAC,IAAM,CACHA,KAAK,CAAC,OAAO,CAAC,CAAG,CAAC,CACtB,CAEA,MAAO,CAAAA,KAAK,CAChB\",\"ignoreList\":[]}",version:"3.16.7"};var _worklet_11661236185430_init_data={code:"function indexTsx4(){const{isDragging}=this.__closure;return{flex:1,zIndex:isDragging?100:0};}",location:"/Users/mohamedashraf/Documents/Projects/MyHaydApp/packages/react-native-page-flipper/src/BookPage/index.tsx",sourceMap:"{\"version\":3,\"names\":[\"indexTsx4\",\"isDragging\",\"__closure\",\"flex\",\"zIndex\"],\"sources\":[\"/Users/mohamedashraf/Documents/Projects/MyHaydApp/packages/react-native-page-flipper/src/BookPage/index.tsx\"],\"mappings\":\"AAwMgD,SAAAA,SAAMA,CAAA,QAAAC,UAAA,OAAAC,SAAA,CAC1C,MAAO,CACHC,IAAI,CAAE,CAAC,CAEPC,MAAM,CAAEH,UAAU,CAAG,GAAG,CAAG,CAC/B,CAAC,CACL\",\"ignoreList\":[]}",version:"3.16.7"};var _worklet_14276874258968_init_data={code:"function indexTsx5(){const{right,interpolate,rotateYAsDeg,single,containerWidth}=this.__closure;const l=right?0:interpolate(rotateYAsDeg.value,[-180,0],single?[0,-containerWidth/2]:[-containerWidth/2,-containerWidth]);return{left:l};}",location:"/Users/mohamedashraf/Documents/Projects/MyHaydApp/packages/react-native-page-flipper/src/BookPage/index.tsx",sourceMap:"{\"version\":3,\"names\":[\"indexTsx5\",\"right\",\"interpolate\",\"rotateYAsDeg\",\"single\",\"containerWidth\",\"__closure\",\"l\",\"value\",\"left\"],\"sources\":[\"/Users/mohamedashraf/Documents/Projects/MyHaydApp/packages/react-native-page-flipper/src/BookPage/index.tsx\"],\"mappings\":\"AAgNuD,SAAAA,SAAMA,CAAA,QAAAC,KAAA,CAAAC,WAAA,CAAAC,YAAA,CAAAC,MAAA,CAAAC,cAAA,OAAAC,SAAA,CACjD,KAAM,CAAAC,CAAC,CAAGN,KAAK,CACT,CAAC,CACDC,WAAW,CACPC,YAAY,CAACK,KAAK,CAClB,CAAC,CAAC,GAAG,CAAE,CAAC,CAAC,CACTJ,MAAM,CACA,CAAC,CAAC,CAAE,CAACC,cAAc,CAAG,CAAC,CAAC,CACxB,CAAC,CAACA,cAAc,CAAG,CAAC,CAAE,CAACA,cAAc,CAC/C,CAAC,CAEP,MAAO,CACHI,IAAI,CAAEF,CACV,CAAC,CACL\",\"ignoreList\":[]}",version:"3.16.7"};var _worklet_11527776123521_init_data={code:"function indexTsx6(event,ctx){const{onPageDragStart,runOnJS,x}=this.__closure;if(onPageDragStart&&typeof onPageDragStart==='function'){runOnJS(onPageDragStart)();}ctx.x=x.value;}",location:"/Users/mohamedashraf/Documents/Projects/MyHaydApp/packages/react-native-page-flipper/src/BookPage/index.tsx",sourceMap:"{\"version\":3,\"names\":[\"indexTsx6\",\"event\",\"ctx\",\"onPageDragStart\",\"runOnJS\",\"x\",\"__closure\",\"value\"],\"sources\":[\"/Users/mohamedashraf/Documents/Projects/MyHaydApp/packages/react-native-page-flipper/src/BookPage/index.tsx\"],\"mappings\":\"AAqOqB,QAAC,CAAAA,SAAOA,CAAAC,KAAQ,CAAAC,GAAA,QAAAC,eAAA,CAAAC,OAAA,CAAAC,CAAA,OAAAC,SAAA,CACrB,GAAIH,eAAe,EAAI,MAAO,CAAAA,eAAe,GAAK,UAAU,CAAE,CAC1DC,OAAO,CAACD,eAAe,CAAC,CAAC,CAAC,CAC9B,CACAD,GAAG,CAACG,CAAC,CAAGA,CAAC,CAACE,KAAK,CACnB\",\"ignoreList\":[]}",version:"3.16.7"};var _worklet_5475464469893_init_data={code:"function indexTsx7(event,ctx){const{runOnJS,onDrag,x,rotateYAsDeg,interpolate,containerWidth,Extrapolate,onPageDrag}=this.__closure;runOnJS(onDrag)(true);x.value=ctx.x+event.translationX;rotateYAsDeg.value=interpolate(x.value,[-containerWidth,0,containerWidth],[180,0,-180],Extrapolate.CLAMP);if(onPageDrag&&typeof onPageDrag==='function'){runOnJS(onPageDrag)();}}",location:"/Users/mohamedashraf/Documents/Projects/MyHaydApp/packages/react-native-page-flipper/src/BookPage/index.tsx",sourceMap:"{\"version\":3,\"names\":[\"indexTsx7\",\"event\",\"ctx\",\"runOnJS\",\"onDrag\",\"x\",\"rotateYAsDeg\",\"interpolate\",\"containerWidth\",\"Extrapolate\",\"onPageDrag\",\"__closure\",\"value\",\"translationX\",\"CLAMP\"],\"sources\":[\"/Users/mohamedashraf/Documents/Projects/MyHaydApp/packages/react-native-page-flipper/src/BookPage/index.tsx\"],\"mappings\":\"AA2OsB,QAAC,CAAAA,SAAOA,CAAAC,KAAQ,CAAAC,GAAA,QAAAC,OAAA,CAAAC,MAAA,CAAAC,CAAA,CAAAC,YAAA,CAAAC,WAAA,CAAAC,cAAA,CAAAC,WAAA,CAAAC,UAAA,OAAAC,SAAA,CACtBR,OAAO,CAACC,MAAM,CAAC,CAAC,IAAI,CAAC,CACrBC,CAAC,CAACO,KAAK,CAAGV,GAAG,CAACG,CAAC,CAAGJ,KAAK,CAACY,YAAY,CACpCP,YAAY,CAACM,KAAK,CAAGL,WAAW,CAC5BF,CAAC,CAACO,KAAK,CACP,CAAC,CAACJ,cAAc,CAAE,CAAC,CAAEA,cAAc,CAAC,CACpC,CAAC,GAAG,CAAE,CAAC,CAAE,CAAC,GAAG,CAAC,CACdC,WAAW,CAACK,KAChB,CAAC,CAED,GAAIJ,UAAU,EAAI,MAAO,CAAAA,UAAU,GAAK,UAAU,CAAE,CAChDP,OAAO,CAACO,UAAU,CAAC,CAAC,CAAC,CACzB,CACJ\",\"ignoreList\":[]}",version:"3.16.7"};var _worklet_7099454600455_init_data={code:"function indexTsx8(event){const{onPageDragEnd,runOnJS,snapPoint,x,pSnapPoints,rotateYAsDeg,onPageFlip,setIsAnimating,clamp,withTiming,timingConfig,onDrag}=this.__closure;if(onPageDragEnd&&typeof onPageDragEnd==='function'){runOnJS(onPageDragEnd)();}const snapTo=snapPoint(x.value,event.velocityX,pSnapPoints);const id=snapTo>0?-1:snapTo<0?1:0;const degrees=snapTo>0?-180:snapTo<0?180:0;x.value=snapTo;if(rotateYAsDeg.value===degrees){runOnJS(onPageFlip)(id,false);}else{runOnJS(setIsAnimating)(true);const progress=Math.abs(rotateYAsDeg.value-degrees)/100;const duration=clamp(800*progress-Math.abs(0.1*event.velocityX),350,1000);rotateYAsDeg.value=withTiming(degrees,{...timingConfig,duration:duration},function(){if(snapTo===0){runOnJS(onDrag)(false);}runOnJS(onPageFlip)(id,false);});}}",location:"/Users/mohamedashraf/Documents/Projects/MyHaydApp/packages/react-native-page-flipper/src/BookPage/index.tsx",sourceMap:"{\"version\":3,\"names\":[\"indexTsx8\",\"event\",\"onPageDragEnd\",\"runOnJS\",\"snapPoint\",\"x\",\"pSnapPoints\",\"rotateYAsDeg\",\"onPageFlip\",\"setIsAnimating\",\"clamp\",\"withTiming\",\"timingConfig\",\"onDrag\",\"__closure\",\"snapTo\",\"value\",\"velocityX\",\"id\",\"degrees\",\"progress\",\"Math\",\"abs\",\"duration\"],\"sources\":[\"/Users/mohamedashraf/Documents/Projects/MyHaydApp/packages/react-native-page-flipper/src/BookPage/index.tsx\"],\"mappings\":\"AAyPoB,SAAAA,SAAUA,CAAAC,KAAA,QAAAC,aAAA,CAAAC,OAAA,CAAAC,SAAA,CAAAC,CAAA,CAAAC,WAAA,CAAAC,YAAA,CAAAC,UAAA,CAAAC,cAAA,CAAAC,KAAA,CAAAC,UAAA,CAAAC,YAAA,CAAAC,MAAA,OAAAC,SAAA,CACd,GAAIZ,aAAa,EAAI,MAAO,CAAAA,aAAa,GAAK,UAAU,CAAE,CACtDC,OAAO,CAACD,aAAa,CAAC,CAAC,CAAC,CAC5B,CAEA,KAAM,CAAAa,MAAM,CAAGX,SAAS,CAACC,CAAC,CAACW,KAAK,CAAEf,KAAK,CAACgB,SAAS,CAAEX,WAAW,CAAC,CAC/D,KAAM,CAAAY,EAAE,CAAGH,MAAM,CAAG,CAAC,CAAG,CAAC,CAAC,CAAGA,MAAM,CAAG,CAAC,CAAG,CAAC,CAAG,CAAC,CAC/C,KAAM,CAAAI,OAAO,CAAGJ,MAAM,CAAG,CAAC,CAAG,CAAC,GAAG,CAAGA,MAAM,CAAG,CAAC,CAAG,GAAG,CAAG,CAAC,CACxDV,CAAC,CAACW,KAAK,CAAGD,MAAM,CAEhB,GAAIR,YAAY,CAACS,KAAK,GAAKG,OAAO,CAAE,CAChChB,OAAO,CAACK,UAAU,CAAC,CAACU,EAAE,CAAE,KAAK,CAAC,CAClC,CAAC,IAAM,CACHf,OAAO,CAACM,cAAc,CAAC,CAAC,IAAI,CAAC,CAE7B,KAAM,CAAAW,QAAQ,CACVC,IAAI,CAACC,GAAG,CAACf,YAAY,CAACS,KAAK,CAAGG,OAAO,CAAC,CAAG,GAAG,CAChD,KAAM,CAAAI,QAAQ,CAAGb,KAAK,CAClB,GAAG,CAAGU,QAAQ,CAAGC,IAAI,CAACC,GAAG,CAAC,GAAG,CAAGrB,KAAK,CAACgB,SAAS,CAAC,CAChD,GAAG,CACH,IACJ,CAAC,CAEDV,YAAY,CAACS,KAAK,CAAGL,UAAU,CAC3BQ,OAAO,CACP,CACI,GAAGP,YAAY,CACfW,QAAQ,CAAEA,QACd,CAAC,CACD,UAAM,CACF,GAAIR,MAAM,GAAK,CAAC,CAAE,CACdZ,OAAO,CAACU,MAAM,CAAC,CAAC,KAAK,CAAC,CAC1B,CACAV,OAAO,CAACK,UAAU,CAAC,CAACU,EAAE,CAAE,KAAK,CAAC,CAClC,CACJ,CAAC,CACL,CACJ\",\"ignoreList\":[]}",version:"3.16.7"};var _worklet_8666435727806_init_data={code:"function indexTsx9(){const{snapTo,runOnJS,onDrag,onPageFlip,id}=this.__closure;if(snapTo===0){runOnJS(onDrag)(false);}runOnJS(onPageFlip)(id,false);}",location:"/Users/mohamedashraf/Documents/Projects/MyHaydApp/packages/react-native-page-flipper/src/BookPage/index.tsx",sourceMap:"{\"version\":3,\"names\":[\"indexTsx9\",\"snapTo\",\"runOnJS\",\"onDrag\",\"onPageFlip\",\"id\",\"__closure\"],\"sources\":[\"/Users/mohamedashraf/Documents/Projects/MyHaydApp/packages/react-native-page-flipper/src/BookPage/index.tsx\"],\"mappings\":\"AAsRwB,SAAAA,SAAMA,CAAA,QAAAC,MAAA,CAAAC,OAAA,CAAAC,MAAA,CAAAC,UAAA,CAAAC,EAAA,OAAAC,SAAA,CACF,GAAIL,MAAM,GAAK,CAAC,CAAE,CACdC,OAAO,CAACC,MAAM,CAAC,CAAC,KAAK,CAAC,CAC1B,CACAD,OAAO,CAACE,UAAU,CAAC,CAACC,EAAE,CAAE,KAAK,CAAC,CAClC\",\"ignoreList\":[]}",version:"3.16.7"};var BookPage=exports.BookPage=_react.default.forwardRef(function(_ref,ref){var right=_ref.right,front=_ref.front,back=_ref.back,onPageFlip=_ref.onPageFlip,containerSize=_ref.containerSize,isAnimatingRef=_ref.isAnimatingRef,setIsAnimating=_ref.setIsAnimating,isAnimating=_ref.isAnimating,enabled=_ref.enabled,isPressable=_ref.isPressable,getPageStyle=_ref.getPageStyle,single=_ref.single,onFlipStart=_ref.onFlipStart,onPageDrag=_ref.onPageDrag,onPageDragEnd=_ref.onPageDragEnd,onPageDragStart=_ref.onPageDragStart,renderPage=_ref.renderPage;var x=(0,_reactNativeReanimated.useSharedValue)(0);var isMounted=(0,_react.useRef)(false);var rotateYAsDeg=(0,_reactNativeReanimated.useSharedValue)(0);var _useState=(0,_react.useState)(false),_useState2=(0,_slicedToArray2.default)(_useState,2),isDragging=_useState2[0],setIsDragging=_useState2[1];var isDraggingRef=(0,_react.useRef)(false);var containerWidth=containerSize.width;var containerHeight=containerSize.height;var leftPSnapPoints=[0,containerWidth];var rightPSnapPoints=[-containerWidth,0];var pSnapPoints=right?rightPSnapPoints:leftPSnapPoints;var gesturesEnabled=enabled&&!isAnimating;var showSpine=true;(0,_react.useEffect)(function(){isMounted.current=true;return function(){isMounted.current=false;};},[]);var turnPage=(0,_react.useCallback)(function(){setIsDragging(true);setIsAnimating(true);var id=right?1:-1;if(onFlipStart&&typeof onFlipStart==='function'){onFlipStart(id);}rotateYAsDeg.value=(0,_reactNativeReanimated.withTiming)(right?180:-180,timingConfig,function(){var _e=[new global.Error(),-4,-27];var indexTsx1=function indexTsx1(){(0,_reactNativeReanimated.runOnJS)(onPageFlip)(id,false);};indexTsx1.__closure={runOnJS:_reactNativeReanimated.runOnJS,onPageFlip:onPageFlip,id:id};indexTsx1.__workletHash=16660376299940;indexTsx1.__initData=_worklet_16660376299940_init_data;indexTsx1.__stackDetails=_e;return indexTsx1;}());},[onFlipStart,setIsDragging,right,onPageFlip,rotateYAsDeg,setIsAnimating]);_react.default.useImperativeHandle(ref,function(){return{turnPage:turnPage};},[turnPage]);var onDrag=(0,_react.useCallback)(function(val){if(!isMounted.current){return;}if(isDraggingRef.current===val){return;}setIsDragging(val);isDraggingRef.current=val;},[]);var backStyle=(0,_reactNativeReanimated.useAnimatedStyle)(function(){var _e=[new global.Error(),-5,-27];var indexTsx2=function indexTsx2(){var degrees=rotateYAsDeg.value;var x=right?(0,_reactNativeReanimated.interpolate)(degrees,[0,180],[containerWidth/2,-containerWidth/2]):(0,_reactNativeReanimated.interpolate)(degrees,[-180,0],[containerWidth/2,0]);var w=right?(0,_reactNativeReanimated.interpolate)(degrees,[0,180],[0,containerWidth/2]):(0,_reactNativeReanimated.interpolate)(degrees,[-180,0],[containerWidth/2,0]);return{width:Math.ceil(w),zIndex:2,transform:[{translateX:x}]};};indexTsx2.__closure={rotateYAsDeg:rotateYAsDeg,right:right,interpolate:_reactNativeReanimated.interpolate,containerWidth:containerWidth};indexTsx2.__workletHash=3840731005230;indexTsx2.__initData=_worklet_3840731005230_init_data;indexTsx2.__stackDetails=_e;return indexTsx2;}());var frontStyle=(0,_reactNativeReanimated.useAnimatedStyle)(function(){var _e=[new global.Error(),-6,-27];var indexTsx3=function indexTsx3(){var degrees=rotateYAsDeg.value;var w=right?(0,_reactNativeReanimated.interpolate)(degrees,[0,90],[containerWidth/2,0],_reactNativeReanimated.Extrapolate.CLAMP):(0,_reactNativeReanimated.interpolate)(degrees,[-90,0],[0,containerWidth/2],_reactNativeReanimated.Extrapolate.CLAMP);var style={zIndex:1,width:Math.floor(w)};if(right){style['left']=0;}else{style['right']=0;}return style;};indexTsx3.__closure={rotateYAsDeg:rotateYAsDeg,right:right,interpolate:_reactNativeReanimated.interpolate,containerWidth:containerWidth,Extrapolate:_reactNativeReanimated.Extrapolate};indexTsx3.__workletHash=7272129541727;indexTsx3.__initData=_worklet_7272129541727_init_data;indexTsx3.__stackDetails=_e;return indexTsx3;}());var containerStyle=(0,_reactNativeReanimated.useAnimatedStyle)(function(){var _e=[new global.Error(),-2,-27];var indexTsx4=function indexTsx4(){return{flex:1,zIndex:isDragging?100:0};};indexTsx4.__closure={isDragging:isDragging};indexTsx4.__workletHash=11661236185430;indexTsx4.__initData=_worklet_11661236185430_init_data;indexTsx4.__stackDetails=_e;return indexTsx4;}());var animatedBackPageStyle=(0,_reactNativeReanimated.useAnimatedStyle)(function(){var _e=[new global.Error(),-6,-27];var indexTsx5=function indexTsx5(){var l=right?0:(0,_reactNativeReanimated.interpolate)(rotateYAsDeg.value,[-180,0],single?[0,-containerWidth/2]:[-containerWidth/2,-containerWidth]);return{left:l};};indexTsx5.__closure={right:right,interpolate:_reactNativeReanimated.interpolate,rotateYAsDeg:rotateYAsDeg,single:single,containerWidth:containerWidth};indexTsx5.__workletHash=14276874258968;indexTsx5.__initData=_worklet_14276874258968_init_data;indexTsx5.__stackDetails=_e;return indexTsx5;}());var onPanGestureHandler=(0,_reactNativeReanimated.useAnimatedGestureHandler)({onStart:function(){var _e=[new global.Error(),-4,-27];var indexTsx6=function indexTsx6(event,ctx){if(onPageDragStart&&typeof onPageDragStart==='function'){(0,_reactNativeReanimated.runOnJS)(onPageDragStart)();}ctx.x=x.value;};indexTsx6.__closure={onPageDragStart:onPageDragStart,runOnJS:_reactNativeReanimated.runOnJS,x:x};indexTsx6.__workletHash=11527776123521;indexTsx6.__initData=_worklet_11527776123521_init_data;indexTsx6.__stackDetails=_e;return indexTsx6;}(),onActive:function(){var _e=[new global.Error(),-9,-27];var indexTsx7=function indexTsx7(event,ctx){(0,_reactNativeReanimated.runOnJS)(onDrag)(true);x.value=ctx.x+event.translationX;rotateYAsDeg.value=(0,_reactNativeReanimated.interpolate)(x.value,[-containerWidth,0,containerWidth],[180,0,-180],_reactNativeReanimated.Extrapolate.CLAMP);if(onPageDrag&&typeof onPageDrag==='function'){(0,_reactNativeReanimated.runOnJS)(onPageDrag)();}};indexTsx7.__closure={runOnJS:_reactNativeReanimated.runOnJS,onDrag:onDrag,x:x,rotateYAsDeg:rotateYAsDeg,interpolate:_reactNativeReanimated.interpolate,containerWidth:containerWidth,Extrapolate:_reactNativeReanimated.Extrapolate,onPageDrag:onPageDrag};indexTsx7.__workletHash=5475464469893;indexTsx7.__initData=_worklet_5475464469893_init_data;indexTsx7.__stackDetails=_e;return indexTsx7;}(),onEnd:function(){var _e=[new global.Error(),-13,-27];var indexTsx8=function indexTsx8(event){if(onPageDragEnd&&typeof onPageDragEnd==='function'){(0,_reactNativeReanimated.runOnJS)(onPageDragEnd)();}var snapTo=(0,_utils.snapPoint)(x.value,event.velocityX,pSnapPoints);var id=snapTo>0?-1:snapTo<0?1:0;var degrees=snapTo>0?-180:snapTo<0?180:0;x.value=snapTo;if(rotateYAsDeg.value===degrees){(0,_reactNativeReanimated.runOnJS)(onPageFlip)(id,false);}else{(0,_reactNativeReanimated.runOnJS)(setIsAnimating)(true);var progress=Math.abs(rotateYAsDeg.value-degrees)/100;var duration=(0,_utils.clamp)(800*progress-Math.abs(0.1*event.velocityX),350,1000);rotateYAsDeg.value=(0,_reactNativeReanimated.withTiming)(degrees,Object.assign({},timingConfig,{duration:duration}),function(){var _e=[new global.Error(),-6,-27];var indexTsx9=function indexTsx9(){if(snapTo===0){(0,_reactNativeReanimated.runOnJS)(onDrag)(false);}(0,_reactNativeReanimated.runOnJS)(onPageFlip)(id,false);};indexTsx9.__closure={snapTo:snapTo,runOnJS:_reactNativeReanimated.runOnJS,onDrag:onDrag,onPageFlip:onPageFlip,id:id};indexTsx9.__workletHash=8666435727806;indexTsx9.__initData=_worklet_8666435727806_init_data;indexTsx9.__stackDetails=_e;return indexTsx9;}());}};indexTsx8.__closure={onPageDragEnd:onPageDragEnd,runOnJS:_reactNativeReanimated.runOnJS,snapPoint:_utils.snapPoint,x:x,pSnapPoints:pSnapPoints,rotateYAsDeg:rotateYAsDeg,onPageFlip:onPageFlip,setIsAnimating:setIsAnimating,clamp:_utils.clamp,withTiming:_reactNativeReanimated.withTiming,timingConfig:timingConfig,onDrag:onDrag};indexTsx8.__workletHash=7099454600455;indexTsx8.__initData=_worklet_7099454600455_init_data;indexTsx8.__stackDetails=_e;return indexTsx8;}()});if(!front||!back){return null;}var frontPageStyle=getPageStyle(right,true);var backPageStyle=getPageStyle(right,false);var frontUrl=right?front.right:front.left;var backUrl=right?back.left:back.right;return(0,_jsxRuntime.jsx)(_reactNativeGestureHandler.PanGestureHandler,{onGestureEvent:onPanGestureHandler,enabled:gesturesEnabled,children:(0,_jsxRuntime.jsxs)(_reactNativeReanimated.default.View,{style:containerStyle,children:[isPressable&&(0,_jsxRuntime.jsx)(_reactNative.Pressable,{disabled:isAnimating,onPress:function onPress(){if(!isAnimatingRef.current)turnPage();},style:[{position:'absolute',height:'100%',width:'25%',zIndex:10000},right?{right:0}:{left:0}]}),(0,_jsxRuntime.jsxs)(_reactNativeReanimated.default.View,{style:[styles.pageContainer,backStyle,{overflow:'visible'}],children:[(0,_jsxRuntime.jsx)(_reactNative.View,{style:styles.pageContainer,children:backUrl?renderPage&&(0,_jsxRuntime.jsx)(_reactNativeReanimated.default.View,{style:[backPageStyle,animatedBackPageStyle],children:renderPage(backUrl)}):(0,_jsxRuntime.jsx)(BlankPage,{})}),(0,_jsxRuntime.jsx)(_BackShadow.default,{degrees:rotateYAsDeg,right:right}),(0,_jsxRuntime.jsx)(_FrontShadow.default,{right:right,degrees:rotateYAsDeg,width:containerWidth,viewHeight:containerHeight}),(0,_jsxRuntime.jsx)(_PageShadow.default,{right:right,degrees:rotateYAsDeg,width:containerWidth,viewHeight:containerHeight,containerSize:containerSize}),showSpine&&(0,_jsxRuntime.jsx)(_BookSpine2.BookSpine2,{right:right,degrees:rotateYAsDeg,containerSize:containerSize})]}),(0,_jsxRuntime.jsxs)(_reactNativeReanimated.default.View,{style:[styles.pageContainer,frontStyle],children:[frontUrl?renderPage&&(0,_jsxRuntime.jsx)(_reactNativeReanimated.default.View,{style:[frontPageStyle],children:renderPage(frontUrl)}):(0,_jsxRuntime.jsx)(BlankPage,{}),showSpine&&(0,_jsxRuntime.jsx)(_BookSpine.BookSpine,{right:right,containerSize:containerSize})]})]})});});var BlankPage=function BlankPage(){return(0,_jsxRuntime.jsx)(_reactNative.View,{style:Object.assign({},_reactNative.StyleSheet.absoluteFillObject,{backgroundColor:'#fff'})});};var styles=_reactNative.StyleSheet.create({container:{flex:1},pageContainer:{height:'100%',width:'100%',position:'absolute',backfaceVisibility:'hidden',overflow:'hidden'}});
//# sourceMappingURL=index.js.map